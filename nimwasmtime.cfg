[n.global]
output = "src/wasmtime"

[n.include]
$output/target
$output/crates/c-api

[n.prepare]
gitremote.ts = "https://github.com/bytecodealliance/wasmtime"
gitbranch.ts = "release-29.0.0"
gitsparse.ts = """
crates
cranelift
src
Cargo.toml
Cargo.lock
build.rs
"""

[n.post]

[src/wasmtime/Cargo.toml]
noprocess = true
regex.1 = """\[\[(test|bench|example)\]\](\n\w.*)*"""
replace.1 = ""

[src/wasmtime/pulley/Cargo.toml]
noprocess = true
regex.1 = """\[\[(test|bench|example)\]\](\n\w.*)*"""
replace.1 = ""

[src/wasmtime/crates/environ/src/fact/trampoline.rs]
noprocess = true
search.1 = """    ) -> Destination {"""
replace.1 = "    ) -> Destination<'_> {"

[src/wasmtime/crates/environ/src/compile/mod.rs]
noprocess = true
search.1 = """    fn get(&self, key: &[u8]) -> Option<Cow<[u8]>>;"""
replace.1 = "    fn get(&self, key: &[u8]) -> Option<Cow<'_, [u8]>>;"
